<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name='viewport' content='width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no'>
	<title>Document</title>
</head>
<body>
	<img src="http://fed.ourwill.cn/static/img/logo.png" id="img">
	<input type="file" name="" id="myfile">
	<button onclick="test3()">ok</button>
	<button onclick="getblob()">getblob</button>

	<script type="text/javascript" src="./canvas-to-blob.min.js"></script>
	<script type="text/javascript" src="./load-image.all.min.js"></script>

	<script type="text/javascript">
		function getblob(){
			try{

				var files=document.getElementById('myfile').files;
				console.log(files);
				var a = new rotateImg();
				a.rotateFileAndGetBlob(files[0],90,function(blob){
					console.info(blob);
					alert(JSON.stringify( blob));

				});
			}
			catch(e){
				alert(e);
			}

		}

		function test(){
			try{

				var files=document.getElementById('myfile').files;
				console.log(files);

				var a = new rotateImg();
				a.readFileToCanvas(files[0],function(canvas){
					alert(files[0].type);
					alert(files[0].size);
					// a.rotate(90);
					a.getBlobData(function(blob){
						alert(blob.size);
					},'image/png',1);

				});
				console.log(a);
			}
			catch(e){
				alert(e);
			}

		}

		function test3(){
			var files=document.getElementById('myfile').files;
			alert(files[0].size);
			loadImage(
			    files[0],
			    function (img) {
			        document.body.appendChild(img);
			        console.log(img);
			        img.toBlob(function(blob){
			        	alert(blob.size);
			        });
			    },
			    {
			        maxWidth: 2560,
			        maxHeight: 1600,
			        minWidth: 100,
			        minHeight: 50,
			        canvas: true,
			        orientation:true
			    }
			);
		}


	</script>
</body>
</html>
